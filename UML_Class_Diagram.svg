<svg id="mermaid-1" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="100%" style="max-width: 1600px;" viewBox="0 0 1600 1000">
  <style>
    .mermaid-node { fill: #f9f9f9; stroke: #333; stroke-width: 2px; }
    .mermaid-class { fill: #e8f4f8; stroke: #0066cc; stroke-width: 2px; }
    .mermaid-actor { fill: #fff2cc; stroke: #d6b656; stroke-width: 2px; }
    .mermaid-enum { fill: #ffe6cc; stroke: #d79b00; stroke-width: 2px; }
    .mermaid-utility { fill: #f0f0f0; stroke: #666; stroke-width: 2px; }
    .mermaid-text { font-family: 'Arial', sans-serif; font-size: 12px; fill: #333; }
    .mermaid-title { font-size: 14px; font-weight: bold; }
    .mermaid-method { font-size: 10px; fill: #666; }
    .mermaid-edge { stroke: #333; stroke-width: 1.5px; fill: none; }
    .mermaid-arrow { stroke: #333; stroke-width: 1.5px; fill: #333; }
    .mermaid-dashed { stroke-dasharray: 5,5; }
    .mermaid-label { font-size: 10px; fill: #666; font-style: italic; }
  </style>

  <!-- Title -->
  <text x="800" y="30" class="mermaid-text mermaid-title" text-anchor="middle">Swift MAC Lookup - UML Class Diagram</text>

  <!-- MACAddress -->
  <rect x="50" y="60" width="280" height="160" class="mermaid-class" rx="5"/>
  <text x="190" y="80" class="mermaid-text mermaid-title" text-anchor="middle">MACAddress</text>
  <line x1="50" y1="90" x2="330" y2="90" class="mermaid-edge"/>
  <text x="60" y="105" class="mermaid-text">+bytes: (UInt8, UInt8, UInt8, UInt8, UInt8, UInt8)</text>
  <text x="60" y="120" class="mermaid-text">+description: String</text>
  <text x="60" y="135" class="mermaid-text">+oui: String</text>
  <line x1="50" y1="145" x2="330" y2="145" class="mermaid-edge"/>
  <text x="60" y="160" class="mermaid-method">+init(string: String) throws</text>
  <text x="60" y="175" class="mermaid-method">+hash(into hasher: inout Hasher)</text>
  <text x="60" y="190" class="mermaid-method">+encode/decode (Codable)</text>
  <text x="60" y="205" class="mermaid-method">Hashable, Sendable, CustomStringConvertible</text>

  <!-- MACVendorInfo -->
  <rect x="380" y="60" width="300" height="180" class="mermaid-class" rx="5"/>
  <text x="530" y="80" class="mermaid-text mermaid-title" text-anchor="middle">MACVendorInfo</text>
  <line x1="380" y1="90" x2="680" y2="90" class="mermaid-edge"/>
  <text x="390" y="105" class="mermaid-text">+prefix: String</text>
  <text x="390" y="120" class="mermaid-text">+companyName: String</text>
  <text x="390" y="135" class="mermaid-text">+companyAddress: String</text>
  <text x="390" y="150" class="mermaid-text">+countryCode: String</text>
  <text x="390" y="165" class="mermaid-text">+blockType: String</text>
  <text x="390" y="180" class="mermaid-text">+updated: String</text>
  <text x="390" y="195" class="mermaid-text">+isPrivate: Bool</text>
  <text x="390" y="210" class="mermaid-text">+rawData: [String: String]</text>
  <line x1="380" y1="220" x2="680" y2="220" class="mermaid-edge"/>
  <text x="390" y="235" class="mermaid-method">+init(...), +from(vendorName:) static</text>

  <!-- MACLookupError -->
  <rect x="730" y="60" width="250" height="160" class="mermaid-enum" rx="5"/>
  <text x="855" y="80" class="mermaid-text mermaid-title" text-anchor="middle">«enumeration»</text>
  <text x="855" y="95" class="mermaid-text mermaid-title" text-anchor="middle">MACLookupError</text>
  <line x1="730" y1="105" x2="980" y2="105" class="mermaid-edge"/>
  <text x="740" y="120" class="mermaid-text">+invalidMACAddress(String)</text>
  <text x="740" y="135" class="mermaid-text">+notFound(String)</text>
  <text x="740" y="150" class="mermaid-text">+databaseError(Error)</text>
  <text x="740" y="165" class="mermaid-text">+networkError(Error)</text>
  <text x="740" y="180" class="mermaid-text">+apiError(String)</text>
  <text x="740" y="195" class="mermaid-text">+invalidConfiguration(String)</text>
  <line x1="730" y1="205" x2="980" y2="205" class="mermaid-edge"/>
  <text x="740" y="215" class="mermaid-method">Error, LocalizedError, Sendable</text>

  <!-- Constants -->
  <rect x="1030" y="60" width="200" height="80" class="mermaid-utility" rx="5"/>
  <text x="1130" y="80" class="mermaid-text mermaid-title" text-anchor="middle">«constants»</text>
  <text x="1130" y="95" class="mermaid-text mermaid-title" text-anchor="middle">Global</text>
  <line x1="1030" y1="105" x2="1230" y2="105" class="mermaid-edge"/>
  <text x="1040" y="120" class="mermaid-text">+ieeeOUIURL: URL</text>

  <!-- MACLookup Actor -->
  <rect x="50" y="280" width="380" height="220" class="mermaid-actor" rx="5"/>
  <text x="240" y="300" class="mermaid-text mermaid-title" text-anchor="middle">«actor»</text>
  <text x="240" y="315" class="mermaid-text mermaid-title" text-anchor="middle">MACLookup</text>
  <line x1="50" y1="325" x2="430" y2="325" class="mermaid-edge"/>
  <text x="60" y="340" class="mermaid-text">-session: URLSession</text>
  <text x="60" y="355" class="mermaid-text">-localDatabaseURL: URL</text>
  <text x="60" y="370" class="mermaid-text">-onlineURL: URL</text>
  <text x="60" y="385" class="mermaid-text">-localDatabase: [String: MACVendorInfo]</text>
  <text x="60" y="400" class="mermaid-text">-decoder: JSONDecoder</text>
  <text x="60" y="415" class="mermaid-text">+lastUpdated: Date?</text>
  <line x1="50" y1="425" x2="430" y2="425" class="mermaid-edge"/>
  <text x="60" y="440" class="mermaid-method">+init(localDatabaseURL:, onlineURL:, session:)</text>
  <text x="60" y="455" class="mermaid-method">+loadLocalDatabase() throws</text>
  <text x="60" y="470" class="mermaid-method">+lookupLocal/Online/lookup(...) async throws</text>
  <text x="60" y="485" class="mermaid-method">+updateDatabase(from:) async throws</text>

  <!-- OUIParser -->
  <rect x="480" y="280" width="200" height="100" class="mermaid-utility" rx="5"/>
  <text x="580" y="300" class="mermaid-text mermaid-title" text-anchor="middle">«utility»</text>
  <text x="580" y="315" class="mermaid-text mermaid-title" text-anchor="middle">OUIParser</text>
  <line x1="480" y1="325" x2="680" y2="325" class="mermaid-edge"/>
  <text x="490" y="345" class="mermaid-method">+parse(Data) throws [String: String]</text>
  <text x="490" y="365" class="mermaid-method">static methods</text>

  <!-- HWAddrLookup -->
  <rect x="730" y="280" width="280" height="140" class="mermaid-class" rx="5"/>
  <text x="870" y="300" class="mermaid-text mermaid-title" text-anchor="middle">«struct»</text>
  <text x="870" y="315" class="mermaid-text mermaid-title" text-anchor="middle">HWAddrLookup</text>
  <line x1="730" y1="325" x2="1010" y2="325" class="mermaid-edge"/>
  <text x="740" y="340" class="mermaid-text">+update: Bool</text>
  <text x="740" y="355" class="mermaid-text">+local: Bool</text>
  <text x="740" y="370" class="mermaid-text">+macAddresses: [String]</text>
  <line x1="730" y1="380" x2="1010" y2="380" class="mermaid-edge"/>
  <text x="740" y="395" class="mermaid-method">+run() async throws</text>
  <text x="740" y="410" class="mermaid-method">AsyncParsableCommand</text>

  <!-- FileCacheManager -->
  <rect x="1060" y="280" width="280" height="140" class="mermaid-actor" rx="5"/>
  <text x="1200" y="300" class="mermaid-text mermaid-title" text-anchor="middle">«actor»</text>
  <text x="1200" y="315" class="mermaid-text mermaid-title" text-anchor="middle">FileCacheManager</text>
  <line x1="1060" y1="325" x2="1340" y2="325" class="mermaid-edge"/>
  <text x="1070" y="340" class="mermaid-text">+shared: FileCacheManager</text>
  <text x="1070" y="355" class="mermaid-text">-fileManager: FileManager</text>
  <text x="1070" y="370" class="mermaid-text">-cacheFileName: String</text>
  <line x1="1060" y1="380" x2="1340" y2="380" class="mermaid-edge"/>
  <text x="1070" y="395" class="mermaid-method">+getCacheFileURL(), +ensureCacheDirectory()</text>
  <text x="1070" y="410" class="mermaid-method">+shouldUpdateCache(...) async</text>

  <!-- MockURLProtocol -->
  <rect x="50" y="550" width="320" height="120" class="mermaid-class" rx="5"/>
  <text x="210" y="570" class="mermaid-text mermaid-title" text-anchor="middle">MockURLProtocol</text>
  <line x1="50" y1="580" x2="370" y2="580" class="mermaid-edge"/>
  <text x="60" y="595" class="mermaid-text">-requestHandler: ((URLRequest) -> ...)?</text>
  <text x="60" y="610" class="mermaid-text">-queue: DispatchQueue</text>
  <line x1="50" y1="620" x2="370" y2="620" class="mermaid-edge"/>
  <text x="60" y="635" class="mermaid-method">+canInit(with:), +startLoading(), +stopLoading()</text>
  <text x="60" y="650" class="mermaid-method">+createMockURLSession() URLSession</text>
  <text x="60" y="665" class="mermaid-method">URLProtocol</text>

  <!-- Relationships with proper arrow positioning -->

  <!-- MACLookup uses MACAddress -->
  <path d="M 240 280 L 190 220" class="mermaid-edge mermaid-dashed"/>
  <polygon points="190,220 185,230 195,230" class="mermaid-arrow"/>
  <text x="200" y="250" class="mermaid-label">uses</text>

  <!-- MACLookup uses MACVendorInfo -->
  <path d="M 380 380 L 380 240" class="mermaid-edge mermaid-dashed"/>
  <polygon points="380,240 375,250 385,250" class="mermaid-arrow"/>
  <text x="385" y="310" class="mermaid-label">manages</text>

  <!-- MACLookup throws MACLookupError -->
  <path d="M 430 350 L 730 200" class="mermaid-edge mermaid-dashed"/>
  <polygon points="730,200 725,210 735,210" class="mermaid-arrow"/>
  <text x="580" y="275" class="mermaid-label">throws</text>

  <!-- MACLookup uses OUIParser -->
  <path d="M 430 380 L 480 350" class="mermaid-edge mermaid-dashed"/>
  <polygon points="480,350 475,360 485,360" class="mermaid-arrow"/>
  <text x="445" y="365" class="mermaid-label">uses</text>

  <!-- OUIParser creates MACVendorInfo -->
  <path d="M 580 280 L 530 240" class="mermaid-edge mermaid-dashed"/>
  <polygon points="530,240 525,250 535,250" class="mermaid-arrow"/>
  <text x="540" y="260" class="mermaid-label">creates</text>

  <!-- HWAddrLookup uses MACLookup -->
  <path d="M 730 380 L 430 400" class="mermaid-edge mermaid-dashed"/>
  <polygon points="430,400 440,395 440,405" class="mermaid-arrow"/>
  <text x="580" y="390" class="mermaid-label">uses</text>

  <!-- HWAddrLookup uses FileCacheManager -->
  <path d="M 1010 350 L 1060 350" class="mermaid-edge mermaid-dashed"/>
  <polygon points="1060,350 1050,345 1050,355" class="mermaid-arrow"/>
  <text x="1025" y="345" class="mermaid-label">uses</text>

  <!-- MACLookup uses Constants -->
  <path d="M 430 280 L 1030 100" class="mermaid-edge mermaid-dashed"/>
  <polygon points="1030,100 1025,110 1035,110" class="mermaid-arrow"/>
  <text x="730" y="190" class="mermaid-label">uses ieeeOUIURL</text>

  <!-- Legend -->
  <rect x="1100" y="550" width="300" height="160" class="mermaid-node" rx="5"/>
  <text x="1250" y="570" class="mermaid-text mermaid-title" text-anchor="middle">Legend</text>
  <line x1="1100" y1="580" x2="1400" y2="580" class="mermaid-edge"/>

  <rect x="1110" y="590" width="15" height="10" class="mermaid-class"/>
  <text x="1135" y="600" class="mermaid-method">Struct/Class</text>
  <rect x="1250" y="590" width="15" height="10" class="mermaid-actor"/>
  <text x="1275" y="600" class="mermaid-method">Actor</text>

  <rect x="1110" y="610" width="15" height="10" class="mermaid-enum"/>
  <text x="1135" y="620" class="mermaid-method">Enumeration</text>
  <rect x="1250" y="610" width="15" height="10" class="mermaid-utility"/>
  <text x="1275" y="620" class="mermaid-method">Utility</text>

  <path d="M 1110 635 L 1160 635" class="mermaid-edge"/>
  <polygon points="1160,635 1150,630 1150,640" class="mermaid-arrow"/>
  <text x="1170" y="640" class="mermaid-method">Inheritance/Conformance</text>

  <path d="M 1110 655 L 1160 655" class="mermaid-edge mermaid-dashed"/>
  <polygon points="1160,655 1150,650 1150,660" class="mermaid-arrow"/>
  <text x="1170" y="660" class="mermaid-method">Uses/Creates/Manages</text>

  <text x="1110" y="685" class="mermaid-method">Key Features:</text>
  <text x="1110" y="695" class="mermaid-method">• Thread-safe actors for concurrency</text>
  <text x="1110" y="705" class="mermaid-method">• Modern Swift async/await patterns</text>

</svg>
